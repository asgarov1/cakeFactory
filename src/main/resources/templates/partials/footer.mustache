<footer class="py-5 bg-dark">
    <div class="container">
        <p class="m-0 text-center text-white">Copyright &copy; Cake Factory 2020</p>
    </div>

    <script src="../vendor/jquery/jquery.min.js"></script>
    <script src="../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script>
        function postAjax(postUrl) {
            event.preventDefault();
            $.fn.serializeObject = function () {
                let o = {};
                let a = this.serializeArray();
                $.each(a, function () {
                    if (o[this.name] !== undefined) {
                        if (!o[this.name].push) {
                            o[this.name] = [o[this.name]];
                        }
                        o[this.name].push(this.value || '');
                    } else {
                        o[this.name] = this.value || '';
                    }
                });
                return o;
            };

            let orderData = JSON.stringify($("#orderForm").serializeObject());

            var token =  $('input[name="_csrf"]').attr('value');

            $.ajax({
                type: "POST",
                url: postUrl,
                headers: {
                    'X-CSRF-Token': token
                },
                data: orderData,
                dataType: "text",
                contentType: "application/json",
                success: function (responseText) {
                    $("#successMessage").text(responseText);
                },
                onload: function () {
                    $("#successMessage").text("Waiting for server response...");
                },
                error: function (request, status, error) {
                    console.log(request.responseText);
                    $("#successMessage").text("Sorry, there was an error. Please try again or contact us.");
                }
            });
        }
    </script>
</footer>