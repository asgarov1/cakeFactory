<footer class="py-5 bg-dark">
    <div class="container">
        <p class="m-0 text-center text-white">Copyright &copy; Cake Factory 2020</p>
    </div>

    <!-- JS, Popper.js, and jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    <script>
        function postAjax(postUrl) {
            event.preventDefault();
            $.fn.serializeObject = function () {
                let o = {};
                let a = this.serializeArray();
                $.each(a, function () {
                    if (o[this.name] !== undefined) {
                        if (!o[this.name].push) {
                            o[this.name] = [o[this.name]];
                        }
                        o[this.name].push(this.value || '');
                    } else {
                        o[this.name] = this.value || '';
                    }
                });
                return o;
            };

            let orderData = JSON.stringify($("#orderForm").serializeObject());

            var token =  $('input[name="_csrf"]').attr('value');

            $.ajax({
                type: "POST",
                url: postUrl,
                headers: {
                    'X-CSRF-Token': token
                },
                data: orderData,
                dataType: "text",
                contentType: "application/json",
                success: function (responseText) {
                    $("#successMessage").text(responseText);
                },
                onload: function () {
                    $("#successMessage").text("Waiting for server response...");
                },
                error: function (request, status, error) {
                    console.log(request.responseText);
                    $("#successMessage").text("Sorry, there was an error. Please try again or contact us.");
                }
            });
        }
    </script>
</footer>